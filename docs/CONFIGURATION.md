# Configuration Guidelines

## Framework vs Application Configuration

This document provides guidelines for managing configuration in the Agent OS + PocketFlow framework repository.

### Framework Repository Configuration (This Repository)

**Appropriate Configurations:**
- `pyproject.toml` - Framework package configuration with minimal runtime dependencies
- `uv.lock` - Dependency lock file for framework development
- `.gitignore` - Framework-specific ignores (development artifacts, build outputs)
- Template configuration files in `templates/` directory
- Validation and testing configurations

**Runtime Dependencies Policy:**
- Keep runtime dependencies minimal - only what's needed for template generation
- Currently: `pyyaml>=6.0.2` (for parsing spec files)
- Development dependencies go in `[project.optional-dependencies.dev]`
- Application runtime dependencies (like `fastapi`, `pytest`) belong in generated templates, not framework

**What NOT to Include:**
- Application-specific environment files (`.env`, `.env.local`, etc.)
- Runtime dependencies for end-user applications (`fastapi`, `pocketflow`, etc.)
- Deployment configurations (`docker-compose.yml`, `Dockerfile`, `k8s.yaml`)
- Application-specific database configurations
- Production secrets or API keys

### End-User Project Configuration (Generated Templates)

**Generated by Framework:**
- `pyproject.toml` with PocketFlow runtime dependencies
- `requirements.txt` and `requirements-dev.txt` 
- `.gitignore` tailored for PocketFlow applications
- Environment file templates (`.env.example`)
- Docker configurations for deployment
- Database configuration templates

### Validation Process

The framework includes validation scripts that check for inappropriate configurations:

1. **Environment Files Check** - Ensures no `.env*` files in framework
2. **PocketFlow Dependencies Check** - Verifies no PocketFlow runtime deps in framework
3. **Deployment Configs Check** - Warns about deployment files (may be templates)
4. **Template Structure Check** - Validates template directory organization

### Key Principles

1. **Framework Purpose**: Creates templates and tooling, doesn't run applications
2. **Separation of Concerns**: Framework configs â‰  Application configs  
3. **Minimal Dependencies**: Framework has minimal runtime footprint
4. **Template Quality**: Generated configs should be production-ready starting points

### Framework vs Usage Context

**Remember:** This repository IS the framework itself, not a project using it.

- **Framework** (this repo) - Generates templates, validates structure, provides tooling
- **Usage** (end-user repos) - Installs PocketFlow, implements templates, runs applications

Missing implementations in generated templates are intentional educational features, not bugs to fix.

## Configuration Examples

### Correct Framework pyproject.toml
```toml
dependencies = [
    "pyyaml>=6.0.2",  # Only what's needed for generation
]

[project.optional-dependencies]
dev = [
    "pytest>=8.4.1",  # Development tooling
    "ruff>=0.1.0",     # Linting
]
```

### Generated Template pyproject.toml  
```toml
dependencies = [
    "pocketflow",                    # PocketFlow runtime (no version constraint)
    "pydantic>=2.0",                # Data validation
    "fastapi>=0.104.0",             # Web framework
    "uvicorn[standard]>=0.24.0",    # ASGI server
]
```

This separation ensures the framework remains lightweight while generated applications have all necessary dependencies.