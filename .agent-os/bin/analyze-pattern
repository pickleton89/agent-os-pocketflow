#!/bin/bash
# PocketFlow Helper Script Template: Pattern Analysis
# Generated by Agent OS + PocketFlow Framework
# This template gets copied to end-user projects during setup

# Get the absolute directory of this script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/../.." && pwd)"
COORDINATOR_PATH="$PROJECT_ROOT/.agent-os/pocketflow-tools/coordinator.py"

# Check if coordinator exists
if [ ! -f "$COORDINATOR_PATH" ]; then
    echo "Error: coordinator.py not found at $COORDINATOR_PATH"
    echo "Make sure you're in a project with PocketFlow tools installed."
    echo "Run: ./setup/project.sh to install required tools"
    exit 1
fi

# Check if required arguments are provided
if [ $# -eq 0 ]; then
    echo "Usage: $0 --project PROJECT_NAME --requirements REQUIREMENTS [--output-format json|text]"
    echo "Example: $0 --project myapp --requirements 'Build a web API'"
    echo ""
    echo "This tool analyzes requirements and recommends PocketFlow patterns."
    exit 1
fi

# Execute coordinator with analyze command
cd "$PROJECT_ROOT"
exec uv run python "$COORDINATOR_PATH" analyze "$@"